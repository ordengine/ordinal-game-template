<!DOCTYPE html>
<html lang="en">
<head>
    <title>bitmap.gg</title>
    <meta charset="UTF-8"/>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    
    <script src="/content/5d82695b820a676ba23cda5390249f295eacb1a97e4df20fc02eaa501bd20eedi0"></script>
    <script src="/content/609b117277f1e9c9f27f358fe02db34e13d08915bbcea18770dc36f5f3afcbb2i2"></script>
    <script src="content/44740a1f30efb247ef41de3355133e12d6f58ab4dc8a3146648e2249fa9c6a39i0"></script>
    <script src="/content/ace98f59871f43dc73db7a65849811fce5bd9aeecca5ee6fad0f99a7793271aci0"></script>
    <link rel="icon" href="/content/cfab194b924f7785c6e453728e1c264b89b74843633278cda3ad3f57576c1e93i0">


  <script type="module" crossorigin>import{jsx as e,Fragment as h,jsxs as c}from"react/jsx-runtime";import y,{useMemo as v,useRef as d,useEffect as u,forwardRef as g,useImperativeHandle as w,useState as A}from"react";import E from"react-dom/client";import{useFrame as b,Canvas as P}from"@react-three/fiber";import{World as z}from"miniplex";import I,{useEntities as M}from"miniplex-react";import{makeStore as x,useStore as C}from"statery";import{EffectComposer as N,Bloom as L}from"@react-three/postprocessing";import{Environment as R}from"@react-three/drei";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const T={shadows:!0,dpr:1,camera:{fov:32,position:[11,2,0],near:.1,far:1e5},gl:{preserveDrawingBuffer:!1,powerPreference:"high-performance",stencil:!1,depth:!1,antialias:!1,alpha:!1}},k=new z,i=I(k),f=x({systemArray:[]});let O=0;const G=()=>`gui-${O++}`,m=t=>{const r=v(()=>G(),[]),n=d(null);return u(()=>{if(!t)return;const o={id:r,system:t,ref:n};return f.set(s=>({systemArray:[...s.systemArray,o]})),()=>{f.set(s=>({systemArray:s.systemArray.filter(l=>l.id!==r)}))}},[r,t]),{id:r,ref:n,remove:()=>{f.set(o=>({systemArray:o.systemArray.filter(s=>s.id!==r)}))}}},D=()=>{const{systemArray:t}=C(f);return e(h,{children:t.map((r,n)=>e(r.system,{},n))})},p=x({elementArray:[]});let F=0;const U=()=>`gui-${F++}`,S=t=>{const r=v(()=>U(),[]),n=d(null);return u(()=>{if(!t||typeof t!="function"&&!y.isValidElement(t)){console.warn("useGUI: invalid element provided");return}const o={id:r,element:t,ref:n};return p.set(s=>({elementArray:[...s.elementArray,o]})),()=>{p.set(s=>({elementArray:s.elementArray.filter(l=>l.id!==r)}))}},[r,t]),{id:r,ref:n,remove:()=>{p.set(o=>({elementArray:o.elementArray.filter(s=>s.id!==r)}))}}},j=()=>{const{elementArray:t}=C(p);return e(h,{children:t.map(({id:r,element:n,ref:a})=>typeof n=="function"?y.cloneElement(n({ref:a}),{key:r}):y.cloneElement(n,{key:r,ref:a}))})},B=()=>{const t=M(i.world.with("render"));return b(()=>{var r;for(const n of t){const{render:a,position:o,rotation:s,scale:l}=n;(r=a==null?void 0:a.group)!=null&&r.current&&(o&&a.group.current.position.set(o.x,o.y,o.z),s&&a.group.current.rotation.set(s.x,s.y,s.z),l&&a.group.current.scale.set(l.x,l.y,l.z))}}),null},K=()=>e(N,{multisampling:6,children:e(L,{mipmapBlur:!0,radius:.8,luminanceThreshold:1.1,intensity:.9,kernelSize:5})}),W=()=>{const t=d(),r=d(),n=d();return u(function(){r.current.target=n.current,t.current.position.set(-2,5,1),n.current.position.set(0,0,0)}),b(()=>{window.playerPos&&(r.current.target=n.current,t.current.position.set(window.playerPos.x+-12,window.playerPos.y+22,window.playerPos.z+1),n.current.position.set(window.playerPos.x+0,window.playerPos.y,window.playerPos.z+0))}),c(h,{children:[e(R,{environmentIntensity:.75,files:"/content/8c4ea8f9fafef081345ba8a72c08efed2373d0ba33ac92aca5f043071fc42909i0"}),e("ambientLight",{intensity:1}),e("group",{ref:t,children:e("directionalLight",{ref:r,color:[1,1,1],intensity:1.1,"shadow-mapSize":[2048,2048],"shadow-camera-near":1,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10,castShadow:!0})}),e("group",{ref:n})]})},H=()=>null,V=g((t,r)=>{const n=d();return w(r,()=>({group:n})),e("group",{ref:n,children:c("mesh",{scale:[3,.1,1],children:[e("boxGeometry",{}),e("meshStandardMaterial",{color:"green"})]})})}),$=()=>{const t=i.world.with("isTerrainChunk");return S(c("div",{className:"absolute top-12 right-0 text-lime-600 p-2",children:["terrain chunks: ",t.entities.length]})),e(i.Entities,{in:t,children:e(i.Component,{name:"render",children:e(V,{})})})},q=()=>(u(()=>{const t=i.world.add({isTerrainChunk:!0,position:{x:0,y:0,z:0}}),r=i.world.add({isTerrainChunk:!0,position:{x:0,y:0,z:1.1}}),n=i.world.add({isTerrainChunk:!0,position:{x:0,y:0,z:-1.1}});return()=>{i.world.remove(t),i.world.remove(r),i.world.remove(n)}},[]),e($,{})),_=g((t,r)=>{const n=d();return S(e("div",{className:"absolute top-0 left-0 text-orange-400 p-2",children:"player 1 HUD"})),w(r,()=>({group:n})),e("group",{ref:n,children:c("mesh",{scale:[.8,.8,.8],position:[0,.4,0],children:[e("boxGeometry",{}),e("meshStandardMaterial",{color:"#ff9900"})]})})}),J=()=>c(i.Entity,{children:[e(i.Component,{name:"isPlayer",data:!0}),e(i.Component,{name:"position",data:{x:0,y:0,z:0}}),e(i.Component,{name:"rotation",data:{x:0,y:0,z:0}}),e(i.Component,{name:"scale",data:{x:1,y:1,z:1}}),e(i.Component,{name:"velocity",data:{x:0,y:0,z:0}}),e(i.Component,{name:"speed",data:5}),e(i.Component,{name:"state",data:{walking:!1,running:!1,jumping:!1,swimming:!1,flying:!1,mounted:!1}}),e(i.Component,{name:"render",children:e(_,{})})]}),Q=()=>e(J,{}),X=g((t,r)=>{const n=d();return w(r,()=>({group:n})),e("group",{ref:n,children:c("mesh",{scale:[.2,.3,.2],children:[e("sphereGeometry",{}),e("meshToonMaterial",{color:[1,4,1]})]})})}),Y=()=>{const t=i.world.with("isMob");return S(c("div",{className:"absolute top-0 right-0 text-lime-400 p-2",children:["mobs: ",t.entities.length]})),e(i.Entities,{in:t,children:e(i.Component,{name:"render",children:e(X,{})})})},Z=()=>(u(()=>{const t=i.world.add({isMob:!0,position:{x:0,y:.2,z:-1}}),r=i.world.add({isMob:!0,position:{x:.7,y:.3,z:1.2}});return()=>{i.world.remove(t),i.world.remove(r)}},[]),e(Y,{})),ee=()=>(m(B),m(W),m(K),m(H),m(q),m(Q),m(Z),c("div",{className:"w-full h-full overflow-hidden",children:[e(P,{...T,children:e(D,{})}),e(j,{})]})),te=({onStart:t})=>c("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gradient-to-b from-gray-800/25 to-gray-900/50",children:[e("h1",{className:"text-4xl font-bold text-white mb-8",children:"R3F ECS template"}),e("button",{onClick:t,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"start"})]}),re=()=>{const[t,r]=A("intro");return c("div",{className:"w-full h-full overflow-hidden",children:[t==="intro"&&e(te,{onStart:()=>{r("game")}}),t==="game"&&e(ee,{})]})};document.addEventListener("contextmenu",t=>t.preventDefault());E.createRoot(document.getElementById("root")).render(e(y.StrictMode,{children:e(re,{})}));</script>
  <style rel="stylesheet">@font-face{font-family:Font;src:url(/content/74d8b14b61735bb0d738108ea9a9530406ffcbdd4b65a4206e0cfbc1ac1500e7i0)}html,body,#root{margin:0;width:100%;height:100%;background:#000;font-family:Font,serif}::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#333}::-webkit-scrollbar-thumb{background:#835000}::-webkit-scrollbar-thumb:hover{background:#ff9900}#imgg{filter:blur(3px);position:absolute}</style>
</head>
<body style="background: #000">
<img id="imgg" draggable="false"
     src="data:image/octet-stream;base64,UklGRrIBAABXRUJQVlA4IKYBAADwEACdASp/AIAAP/3+/3+/v7+7rJerS/A/iWgAzB9PzclhycB8lJnzK1e+RaFBcKxsckKoIkSV5sbyJh7EBuO7QKBGtyOAvK9Pr9BahlkFbjCOn1WnSnZu7scGJLXrfAqGOWvRy1YCUQ7wKOLBBveFYVw9nvo2iKkFu8sbi5w64IOBV85u/AcyoRzNAjqOHAAA9AtxRGVGuTCk0szVPlh7qXgT3vK8trBH6UqUOJXvWLdWredSQBEURJBFjy3hBt4N5eX+17qEN534YSY9O23ATKMbFfkO03MQVDzAXUbOQyryW6cOpVFIZskBVNZXTvwWgW7xdAMQH3kGFIz4gOH91nC7rvSi82BS+yPvSl6t8lmAyMytf37NVTvuZZi0DYiDNxj30Jc6gM9zSt1dtF1c7Cqd9+ooXNH5MA3RY4c3b9R9WH/hlLcahmVSfYg6T35fR/dXD5yhodZtrSdgBlD9ElOarJ6u6fd4tBKZksG1WMFibyTk4dnZ6Du+jZTwWCHIrMVD+C/oOJMlB0qK57eCp8vL+NEOOMNXsxkrCOBePpfESIAAAA=="
     style="filter: blur(50px); pointer-events: none; object-fit: cover; z-index: 0; width: 100%; height: 100%; opacity: 0.25; position: absolute; top: 0; left: 0;"/>
<div id="root"></div>

</body>
</html>
