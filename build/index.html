<!DOCTYPE html>
<html lang="en">
<head>
    <title>bitmap.gg</title>
    <meta charset="UTF-8"/>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    
    <script src="/content/5d82695b820a676ba23cda5390249f295eacb1a97e4df20fc02eaa501bd20eedi0"></script>
    <script src="/content/609b117277f1e9c9f27f358fe02db34e13d08915bbcea18770dc36f5f3afcbb2i2"></script>
    <script src="content/44740a1f30efb247ef41de3355133e12d6f58ab4dc8a3146648e2249fa9c6a39i0"></script>
    <script src="/content/ace98f59871f43dc73db7a65849811fce5bd9aeecca5ee6fad0f99a7793271aci0"></script>
    <link rel="icon" href="/content/cfab194b924f7785c6e453728e1c264b89b74843633278cda3ad3f57576c1e93i0">


  <script type="module" crossorigin>import{jsx as a,Fragment as j,jsxs as p}from"react/jsx-runtime";import f,{useState as R,useMemo as L,useLayoutEffect as U,useEffect as E,useContext as M,memo as k,forwardRef as I,useRef as h,createContext as X,useImperativeHandle as O}from"react";import Y from"react-dom/client";import{useFrame as W,Canvas as Z}from"@react-three/fiber";import{Bucket as ee,World as te}from"miniplex";import{makeStore as F,useStore as G}from"statery";import{EffectComposer as re,Bloom as ne}from"@react-three/postprocessing";import{Environment as oe}from"@react-three/drei";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();function ie(e){if(Array.isArray(e))return e}function ae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,c,m;try{for(r=r.call(e);!(o=(c=r.next()).done)&&(n.push(c.value),!(t&&n.length===t));o=!0);}catch(y){i=!0,m=y}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw m}}return n}}function N(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function se(e,t){if(e){if(typeof e=="string")return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}}function ue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(e,t){return ie(e)||ae(e,t)||se(e,t)||ue()}var le=function(){var t=R(0),r=ce(t,2),n=r[0],o=r[1];return[n,function(){return o(function(i){return i+1})}]};function fe(e){if(Array.isArray(e))return e}function de(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,c,m;try{for(r=r.call(e);!(o=(c=r.next()).done)&&(n.push(c.value),!(t&&n.length===t));o=!0);}catch(y){i=!0,m=y}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw m}}return n}}function B(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function me(e,t){if(e){if(typeof e=="string")return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}}function ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(e,t){return fe(e)||de(e,t)||me(e,t)||ye()}var he=function(){var t=le(),r=pe(t,2);r[0];var n=r[1];return n};function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}function ve(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function P(e,t){if(e==null)return{};var r=ve(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ge(e){if(Array.isArray(e))return e}function be(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,c,m=[],y=!0,S=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;y=!1}else for(;!(y=(n=i.call(r)).done)&&(m.push(n.value),m.length!==t);y=!0);}catch(_){S=!0,o=_}finally{try{if(!y&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(S)throw o}}return m}}function V(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function we(e,t){if(e){if(typeof e=="string")return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}}function Ee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ae(e,t){return ge(e)||be(e,t)||we(e,t)||Ee()}var Se=typeof window<"u"?U:E,$=Se;function D(e){var t=he();return Ce(e,t),xe(e,t),e}function Ce(e,t){H(e,t),$(function(){return e.onEntityAdded.subscribe(t)},[e,t])}function xe(e,t){H(e,t),$(function(){return e.onEntityRemoved.subscribe(t)},[e,t])}function H(e,t){var r=L(function(){return e.version},[e]);$(function(){e.version!==r&&t()},[e])}var Ie=function(t){return function(r){t.forEach(function(n){typeof n=="function"?n(r):n&&(n.current=r)})}},Oe=["entities"],_e=["bucket"],Pe=["in"],T=typeof window<"u"?U:E,Te=function(t){var r=X(null),n=function(){var s=M(r);if(!s)throw new Error("useCurrentEntity must be called from a child of <Entity>.");return s},o=function(s,l){var d=s.children,g=s.entity,K=R(function(){return{}}),q=Ae(K,1),J=q[0],b=g||J;T(function(){if(!t.has(b))return t.add(b),function(){t.remove(b)}},[t,b]);var Q=typeof d=="function"?d(b):d;return O(l,function(){return b}),f.createElement(r.Provider,{value:b},Q)},i=k(I(o)),c=function(s){var l=s.entities,d=P(s,Oe);return f.createElement(f.Fragment,null,l.map(function(g){return f.createElement(i,A({key:t.id(g),entity:g},d))}))},m=function(s){var l=s.bucket,d=P(s,_e);return f.createElement(c,A({entities:D(l).entities},d))},y=k(m);function S(v){var s=v.in,l=P(v,Pe);return s instanceof ee?f.createElement(y,A({bucket:s},l)):f.createElement(c,A({entities:s},l))}var _=function(s){var l=M(r),d=h(null);if(!l)throw new Error("<Component> must be a child of <Entity>");if(T(function(){return t.addComponent(l,s.name,s.data||d.current),function(){return t.removeComponent(l,s.name)}},[l,s.name]),T(function(){s.data!==void 0&&(l[s.name]=s.data||d.current)},[l,s.name,s.data,d.current]),s.children){var g=f.Children.only(s.children);return f.cloneElement(g,{ref:Ie([g.ref,d])})}return null};return{world:t,Component:_,Entity:i,Entities:S,useCurrentEntity:n}};const je={shadows:!0,dpr:1,camera:{fov:32,position:[11,2,0],near:.1,far:1e5},gl:{preserveDrawingBuffer:!1,powerPreference:"high-performance",stencil:!1,depth:!1,antialias:!1,alpha:!1}},Re=new te,u=Te(Re),C=F({systemArray:[]});let Le=0;const $e=()=>`gui-${Le++}`,w=e=>{const t=L(()=>$e(),[]),r=h(null);return E(()=>{if(!e)return;const o={id:t,system:e,ref:r};return C.set(i=>({systemArray:[...i.systemArray,o]})),()=>{C.set(i=>({systemArray:i.systemArray.filter(c=>c.id!==t)}))}},[t,e]),{id:t,ref:r,remove:()=>{C.set(o=>({systemArray:o.systemArray.filter(i=>i.id!==t)}))}}},ze=()=>{const{systemArray:e}=G(C);return a(j,{children:e.map((t,r)=>a(t.system,{},r))})},x=F({elementArray:[]});let Me=0;const ke=()=>`gui-${Me++}`,z=e=>{const t=L(()=>ke(),[]),r=h(null);return E(()=>{if(!e||typeof e!="function"&&!f.isValidElement(e)){console.warn("useGUI: invalid element provided");return}const o={id:t,element:e,ref:r};return x.set(i=>({elementArray:[...i.elementArray,o]})),()=>{x.set(i=>({elementArray:i.elementArray.filter(c=>c.id!==t)}))}},[t,e]),{id:t,ref:r,remove:()=>{x.set(o=>({elementArray:o.elementArray.filter(i=>i.id!==t)}))}}},Ne=()=>{const{elementArray:e}=G(x);return a(j,{children:e.map(({id:t,element:r,ref:n})=>typeof r=="function"?f.cloneElement(r({ref:n}),{key:t}):f.cloneElement(r,{key:t,ref:n}))})},Be=()=>{const e=D(u.world.with("render"));return W(()=>{var t;for(const r of e){const{render:n,position:o,rotation:i,scale:c}=r;(t=n==null?void 0:n.group)!=null&&t.current&&(o&&n.group.current.position.set(o.x,o.y,o.z),i&&n.group.current.rotation.set(i.x,i.y,i.z),c&&n.group.current.scale.set(c.x,c.y,c.z))}}),null},Ve=()=>a(re,{multisampling:6,children:a(ne,{mipmapBlur:!0,radius:.8,luminanceThreshold:1.1,intensity:.9,kernelSize:5})}),Ue=()=>{const e=h(),t=h(),r=h();return E(function(){t.current.target=r.current,e.current.position.set(-2,5,1),r.current.position.set(0,0,0)}),W(()=>{window.playerPos&&(t.current.target=r.current,e.current.position.set(window.playerPos.x+-12,window.playerPos.y+22,window.playerPos.z+1),r.current.position.set(window.playerPos.x+0,window.playerPos.y,window.playerPos.z+0))}),p(j,{children:[a(oe,{environmentIntensity:.75,files:"/content/8c4ea8f9fafef081345ba8a72c08efed2373d0ba33ac92aca5f043071fc42909i0"}),a("ambientLight",{intensity:1}),a("group",{ref:e,children:a("directionalLight",{ref:t,color:[1,1,1],intensity:1.1,"shadow-mapSize":[2048,2048],"shadow-camera-near":1,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10,castShadow:!0})}),a("group",{ref:r})]})},We=()=>null,Fe=I((e,t)=>{const r=h();return O(t,()=>({group:r})),a("group",{ref:r,children:p("mesh",{scale:[3,.1,1],children:[a("boxGeometry",{}),a("meshStandardMaterial",{color:"green"})]})})}),Ge=()=>{const e=u.world.with("isTerrainChunk");return z(p("div",{className:"absolute top-12 right-0 text-lime-600 p-2",children:["terrain chunks: ",e.entities.length]})),a(u.Entities,{in:e,children:a(u.Component,{name:"render",children:a(Fe,{})})})},De=()=>(E(()=>{const e=u.world.add({isTerrainChunk:!0,position:{x:0,y:0,z:0}}),t=u.world.add({isTerrainChunk:!0,position:{x:0,y:0,z:1.1}}),r=u.world.add({isTerrainChunk:!0,position:{x:0,y:0,z:-1.1}});return()=>{u.world.remove(e),u.world.remove(t),u.world.remove(r)}},[]),a(Ge,{})),He=I((e,t)=>{const r=h();return z(a("div",{className:"absolute top-0 left-0 text-orange-400 p-2",children:"player 1 HUD"})),O(t,()=>({group:r})),a("group",{ref:r,children:p("mesh",{scale:[.8,.8,.8],position:[0,.4,0],children:[a("boxGeometry",{}),a("meshStandardMaterial",{color:"#ff9900"})]})})}),Ke=()=>p(u.Entity,{children:[a(u.Component,{name:"isPlayer",data:!0}),a(u.Component,{name:"position",data:{x:0,y:0,z:0}}),a(u.Component,{name:"rotation",data:{x:0,y:0,z:0}}),a(u.Component,{name:"scale",data:{x:1,y:1,z:1}}),a(u.Component,{name:"velocity",data:{x:0,y:0,z:0}}),a(u.Component,{name:"speed",data:5}),a(u.Component,{name:"state",data:{walking:!1,running:!1,jumping:!1,swimming:!1,flying:!1,mounted:!1}}),a(u.Component,{name:"render",children:a(He,{})})]}),qe=()=>a(Ke,{}),Je=I((e,t)=>{const r=h();return O(t,()=>({group:r})),a("group",{ref:r,children:p("mesh",{scale:[.2,.3,.2],children:[a("sphereGeometry",{}),a("meshToonMaterial",{color:[1,4,1]})]})})}),Qe=()=>{const e=u.world.with("isMob");return z(p("div",{className:"absolute top-0 right-0 text-lime-400 p-2",children:["mobs: ",e.entities.length]})),a(u.Entities,{in:e,children:a(u.Component,{name:"render",children:a(Je,{})})})},Xe=()=>(E(()=>{const e=u.world.add({isMob:!0,position:{x:0,y:.2,z:-1}}),t=u.world.add({isMob:!0,position:{x:.7,y:.3,z:1.2}});return()=>{u.world.remove(e),u.world.remove(t)}},[]),a(Qe,{})),Ye=()=>(w(Be),w(Ue),w(Ve),w(We),w(De),w(qe),w(Xe),p("div",{className:"w-full h-full overflow-hidden",children:[a(Z,{...je,children:a(ze,{})}),a(Ne,{})]})),Ze=({onStart:e})=>p("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gradient-to-b from-gray-800/25 to-gray-900/50",children:[a("h1",{className:"text-4xl font-bold text-white mb-8",children:"R3F ECS template"}),a("button",{onClick:e,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"start"})]}),et=()=>{const[e,t]=R("intro");return p("div",{className:"w-full h-full overflow-hidden",children:[e==="intro"&&a(Ze,{onStart:()=>{t("game")}}),e==="game"&&a(Ye,{})]})};document.addEventListener("contextmenu",e=>e.preventDefault());Y.createRoot(document.getElementById("root")).render(a(f.StrictMode,{children:a(et,{})}));</script>
  <style rel="stylesheet">@font-face{font-family:Font;src:url(/content/74d8b14b61735bb0d738108ea9a9530406ffcbdd4b65a4206e0cfbc1ac1500e7i0)}html,body,#root{margin:0;width:100%;height:100%;background:#000;font-family:Font,serif}::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#333}::-webkit-scrollbar-thumb{background:#835000}::-webkit-scrollbar-thumb:hover{background:#ff9900}#imgg{filter:blur(3px);position:absolute}</style>
</head>
<body style="background: #000">
<img id="imgg" draggable="false"
     src="data:image/octet-stream;base64,UklGRrIBAABXRUJQVlA4IKYBAADwEACdASp/AIAAP/3+/3+/v7+7rJerS/A/iWgAzB9PzclhycB8lJnzK1e+RaFBcKxsckKoIkSV5sbyJh7EBuO7QKBGtyOAvK9Pr9BahlkFbjCOn1WnSnZu7scGJLXrfAqGOWvRy1YCUQ7wKOLBBveFYVw9nvo2iKkFu8sbi5w64IOBV85u/AcyoRzNAjqOHAAA9AtxRGVGuTCk0szVPlh7qXgT3vK8trBH6UqUOJXvWLdWredSQBEURJBFjy3hBt4N5eX+17qEN534YSY9O23ATKMbFfkO03MQVDzAXUbOQyryW6cOpVFIZskBVNZXTvwWgW7xdAMQH3kGFIz4gOH91nC7rvSi82BS+yPvSl6t8lmAyMytf37NVTvuZZi0DYiDNxj30Jc6gM9zSt1dtF1c7Cqd9+ooXNH5MA3RY4c3b9R9WH/hlLcahmVSfYg6T35fR/dXD5yhodZtrSdgBlD9ElOarJ6u6fd4tBKZksG1WMFibyTk4dnZ6Du+jZTwWCHIrMVD+C/oOJMlB0qK57eCp8vL+NEOOMNXsxkrCOBePpfESIAAAA=="
     style="filter: blur(50px); pointer-events: none; object-fit: cover; z-index: 0; width: 100%; height: 100%; opacity: 0.25; position: absolute; top: 0; left: 0;"/>
<div id="root"></div>

</body>
</html>
